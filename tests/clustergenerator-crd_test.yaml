suite: check if the clustergenerator crd has the argocd server-side apply annotation
release:
  name: external-secrets
templates:
- charts/external-secrets/templates/crds/clustergenerator.yaml
values:
- ../values-subchart-overrides.yaml
tests:
- it: snapshot test for detecting side effects on clustergenerator crd during local development
  asserts:
  - matchSnapshot: {}
- it: check if the clustergenerator crd annotations contains the argocd server-side apply annotation
  asserts:
  - isSubset:
      path: metadata.annotations
      content:
        argocd.argoproj.io/sync-options: ServerSideApply=true
