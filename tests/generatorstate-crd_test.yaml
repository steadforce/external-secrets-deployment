suite: check if the generatorstate crd has the argocd server-side apply annotation
release:
  name: external-secrets
templates:
- charts/external-secrets/templates/crds/generatorstate.yaml
values:
- ../values-subchart-overrides.yaml
tests:
- it: snapshot test for detecting side effects on generatorstate crd during local development
  asserts:
  - matchSnapshot: {}
- it: check if the generatorstate crd annotations contain the argocd server-side apply annotation
  asserts:
  - isSubset:
      path: metadata.annotations
      content:
        argocd.argoproj.io/sync-options: ServerSideApply=true
